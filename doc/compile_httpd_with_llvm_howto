How to compile Apache httpd 2.2.4 using llvm 2.0
------------------------------------------------


1.	download httpd and unarchive it.
2.	cd into httpd-2.2.4/build
	edit rules.mk.in as follows:
		- remove the $(EXTRA_CFLAGS) from the ALL_CFLAGS substitution:
			ALL_CFLAGS   = $(NOTEST_CFLAGS) $(CFLAGS)
		- change the LINK, SH_LINK and MOD_LINK substitutions as follows:
			LINK     = $(LIBTOOL) --mode=link --tag=CC $(LD) @PILDFLAGS@ $(LT_LDFLAGS) $(ALL_LDFLAGS) -o $@
			SH_LINK  = $(SH_LIBTOOL) --mode=link --tag=CC $(LD) $(LT_LDFLAGS) $(ALL_LDFLAGS) $(SH_LDFLAGS) $(CORE_IMPLIB) $(SH_LIBS) -o $@
			MOD_LINK = $(LIBTOOL) --mode=link --tag=CC $(LD) -static $(LT_LDFLAGS) $(ALL_LDFLAGS) -o $@
		- save the changes and exit
3.	set up the environment variables
		- export CC="llvm-gcc"
		- export CXX="llvm-g++"
		- export LD="llvm-ld"
		- export CPP="llvm-cpp"
		- export NOTEST_CFLAGS="-emit-llvm"
4.	run
		./configure
5.	cd into the build directory and view the config_vars.mk file
	search for the EXTRA_CFLAGS definition and take all options you see there except "-O2 -g"
	in my case this is "-pthread"
	run
		export CFLAGS="-pthread"
	(and all the other options you may have found in EXTRA_CFLAGS)
6.	run
		make distclean && ./configure && make
7.	run
		find . -name '*.bc' -exec cp '{}' <YOUR_INSTALL_PREFIX/bin> \;
	to copy all bytecode files to the bindir.
