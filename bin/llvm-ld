#! /usr/bin/env python 

import sys
import os
import re

LinkerOpt_re = re.compile(r'-Wl,(.*)')
Linker = 'llvm-ld'

def main():
    new_args = [Linker]
    for arg in sys.argv[1:]:
        m = LinkerOpt_re.match(arg)
        if m:
            new_args += ["-" + m.groups()[0]]
        else:
            new_args += [arg]
    print " ".join(new_args)
    os.execvp(new_args[0], new_args)

if __name__ == "__main__":
    main()
